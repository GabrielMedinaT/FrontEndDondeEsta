{"ast":null,"code":"import _objectSpread from\"C:/Users/gabri/Documents/ProyectoFinal/FrontEndDondeEsta/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/gabri/Documents/ProyectoFinal/FrontEndDondeEsta/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"C:/Users/gabri/Documents/ProyectoFinal/FrontEndDondeEsta/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"C:/Users/gabri/Documents/ProyectoFinal/FrontEndDondeEsta/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useTranslation}from\"react-i18next\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Addcasa=function Addcasa(){var _useTranslation=useTranslation(\"global\"),t=_useTranslation.t;// const navigate = useNavigate();\nvar _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var extraerDatosDeUsuario=function extraerDatosDeUsuario(){var datosRecuperar=JSON.parse(localStorage.getItem(\"datosUsuario\"));if(datosRecuperar&&datosRecuperar.token){console.log(datosRecuperar.token);return[datosRecuperar.token,datosRecuperar.userId];}};var gestorFormulario=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var _extraerDatosDeUsuari,_extraerDatosDeUsuari2,token,userId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_extraerDatosDeUsuari=extraerDatosDeUsuario(),_extraerDatosDeUsuari2=_slicedToArray(_extraerDatosDeUsuari,2),token=_extraerDatosDeUsuari2[0],userId=_extraerDatosDeUsuari2[1];_context.next=3;return axios.post(process.env.REACT_APP_API_URL+\"/api/casas/nueva\",{nombre:data.nombre,direccion:data.direccion,ciudad:data.ciudad,userId:userId// Agrega el id del usuario al objeto que se envía al servidor\n},{headers:{Authorization:\"Bearer \".concat(token)// Agrega el token de autorización en el objeto de configuración de axios\n}}).then(function(response){console.log(\"Todo correcto\",response.data);if(response.status===200)window.location.reload();else alert(\"Error al crear la casa\");}).catch(function(error){return console.log(error.response.data);});case 3:case\"end\":return _context.stop();}},_callee);}));return function gestorFormulario(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"addCasa\",action:\"\",onSubmit:handleSubmit(gestorFormulario),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",placeholder:\"Nombre del primer nivel\"},register(\"nombre\",{minLength:2,required:true}))),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",placeholder:\"Nombre\"},register(\"direccion\",{minLength:5,required:true}))),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",placeholder:\"Ciudad\"},register(\"ciudad\",{minLength:5,required:true}))),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:t(\"btn1.btn1\")})]})});};export default Addcasa;","map":{"version":3,"names":["React","useTranslation","useForm","axios","jsx","_jsx","jsxs","_jsxs","Addcasa","_useTranslation","t","_useForm","register","handleSubmit","extraerDatosDeUsuario","datosRecuperar","JSON","parse","localStorage","getItem","token","console","log","userId","gestorFormulario","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","_extraerDatosDeUsuari","_extraerDatosDeUsuari2","wrap","_callee$","_context","prev","next","_slicedToArray","post","process","env","REACT_APP_API_URL","nombre","direccion","ciudad","headers","Authorization","concat","then","response","status","window","location","reload","alert","catch","error","stop","_x","apply","arguments","children","className","action","onSubmit","_objectSpread","type","placeholder","minLength","required"],"sources":["C:/Users/gabri/Documents/ProyectoFinal/FrontEndDondeEsta/frontend/src/components/Addcasa.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport axios from \"axios\";\r\n\r\nconst Addcasa = () => {\r\n  const { t } = useTranslation(\"global\");\r\n  // const navigate = useNavigate();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    // formState: {},\r\n  } = useForm();\r\n\r\n  const extraerDatosDeUsuario = () => {\r\n    const datosRecuperar = JSON.parse(localStorage.getItem(\"datosUsuario\"));\r\n    if (datosRecuperar && datosRecuperar.token) {\r\n      console.log(datosRecuperar.token);\r\n      return [datosRecuperar.token, datosRecuperar.userId];\r\n    }\r\n  };\r\n\r\n  const gestorFormulario = async (data) => {\r\n    const [token, userId] = extraerDatosDeUsuario();\r\n\r\n    await axios\r\n      .post(\r\n        process.env.REACT_APP_API_URL + \"/api/casas/nueva\",\r\n        {\r\n          nombre: data.nombre,\r\n          direccion: data.direccion,\r\n          ciudad: data.ciudad,\r\n          userId: userId, // Agrega el id del usuario al objeto que se envía al servidor\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`, // Agrega el token de autorización en el objeto de configuración de axios\r\n          },\r\n        }\r\n      )\r\n      .then((response) => {\r\n        console.log(\"Todo correcto\", response.data);\r\n        if (response.status === 200) window.location.reload();\r\n        else alert(\"Error al crear la casa\");\r\n      })\r\n      .catch((error) => console.log(error.response.data));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form\r\n        className=\"addCasa\"\r\n        action=\"\"\r\n        onSubmit={handleSubmit(gestorFormulario)}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nombre del primer nivel\"\r\n          {...register(\"nombre\", { minLength: 2, required: true })}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nombre\"\r\n          {...register(\"direccion\", { minLength: 5, required: true })}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Ciudad\"\r\n          {...register(\"ciudad\", { minLength: 5, required: true })}\r\n        />\r\n        <br />\r\n        <button type=\"submit\">{t(\"btn1.btn1\")}</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Addcasa;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}